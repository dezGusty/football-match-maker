<app-header></app-header>

<div class="players-container">
    <div class="column">
        <h3>Available Players</h3>
        <div class="search-container">
            <input 
                type="text" 
                [(ngModel)]="searchTerm" 
                placeholder="Caută jucători..." 
                class="search-input"
            />
        </div>
        <ul class="players-list">
            <li *ngFor="let player of filteredAvailablePlayers" class="player-item">
                <div class="player-info">
                    <span>{{ player.firstName }} {{ player.lastName }}</span>
                    <span class="player-rating">Rating: {{ player.rating }}</span>
                </div>
                <button class="select-button" (click)="selectPlayer(player)"
                    [disabled]="selectedPlayers.length >= maxAvailable">
                    Select
                </button>
            </li>
        </ul>
    </div>

    <div class="column">
        <h3>Selected Players</h3>
        <ul class="players-list">
            <li *ngFor="let player of selectedPlayers" class="player-item">
                <div class="player-info">
                    <span>{{ player.firstName }} {{ player.lastName }}</span>
                    <span class="player-rating">Rating: {{ player.rating }}</span>
                </div>
                <button class="select-button" (click)="unselectPlayer(player)" style="background: #dc3545;">
                    Remove
                </button>
            </li>
        </ul>
        <button *ngIf="selectedPlayers.length >= 10" class="floating-btn" (click)="generateTeams()">
            Finalize Selection
        </button>
    </div>
</div>

<!-- Modal simplificat pentru echipe -->
@if (showTeamsModal) {
<div class="modal-overlay">
    <div class="modal-content">
        <button class="close-btn" (click)="closeTeamsModal()">&times;</button>
        <h2>Teams</h2>

        <div class="teams-grid">
            <!-- Echipa 1 -->
            <div class="team">
                <h3>Team 1 ({{ team1.averageRating | number:'1.1-1' }})</h3>
                <ul>
                    <li *ngFor="let player of team1.players">
                        {{ player.firstName }} {{ player.lastName }}
                        <span class="rating-badge" [class]="'rating-' + getRatingCategory(player.rating)">
                            {{ player.rating }}
                        </span>
                    </li>
                </ul>
            </div>

            <!-- Echipa 2 -->
            <div class="team">
                <h3>Team 2 ({{ team2.averageRating | number:'1.1-1' }})</h3>
                <ul>
                    <li *ngFor="let player of team2.players">
                        {{ player.firstName }} {{ player.lastName }}
                        <span class="rating-badge" [class]="'rating-' + getRatingCategory(player.rating)">
                            {{ player.rating }}
                        </span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="modal-actions">
            <button class="begin-match-btn" (click)="beginMatch()">Begin Match</button>
        </div>
    </div>
</div>
}